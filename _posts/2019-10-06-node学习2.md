---
layout: post
title:  "node学习(2)"
date:   2018-10-06 16:19:01 +0800
categories: js
tag: node
---

* content
{:toc}

学习文档来源 [nodejs中文网](http://nodejs.cn/api/net.html)

fs - 文件系统			{#fs}
====================================

fs 模块提供了一些 API，用于以一种类似标准 POSIX 函数的方式与文件系统进行交互。  
用法如下：  
`const fs = require('fs');`  
所有的文件系统操作都有异步和同步两种形式。  
异步形式的最后一个参数都是完成时回调函数。 传给回调函数的参数取决于具体方法，但回调函数的第一个参数都会保留给异常。 如果操作成功完成，则第一个参数会是 null 或 undefined。  

`文件描述符`  
>在 POSIX 系统，内核为所有进程维护着一张当前打开着的文件与资源的表格。 每个打开的文件都会分配一个名为文件描述符的数值标识。 在系统层，所有文件系统操作使用这些文件描述符来识别与追踪每个特定的文件。 Window 系统使用了一个不同但概念类似的机制来追踪资源。 为方便用户，Node.js 抽象了不同操作系统间的差异，为所有打开的文件分配了数值的文件描述符。fs.open() 方法用于分配一个新的文件描述符。 一旦分配了，文件描述符可用于读取数据、写入数据、或查看文件信息。  

```javascript
fs.open('/open/some/file.txt', 'r', (err, fd) => {
  if (err) throw err;
  fs.fstat(fd, (err, stat) => {
    if (err) throw err;
    // 各种操作

    // 必须关闭文件描述符！
    fs.close(fd, (err) => {
      if (err) throw err;
    });
  });
});
```

`fs.ReadStream 类`  
成功调用 fs.createReadStream() 会返回一个新的 fs.ReadStream 对象。fs.ReadStream 对象都是可读流。  

`fs.Stats 类`  
fs.Stats 对象提供了一个文件的信息。从 fs.stat()、fs.lstat() 和 fs.fstat() 及其同步版本返回的对象都是该类型。 如果传入这些函数的 options 中的 bigint 为 true，则数值会是 bigint 型而不是 number 型。  

`fs.WriteStream 类`  
WriteStream 是一个可写流。  

```javascript
fs.access(path[, mode], callback) //测试 path 指定的文件或目录的用户权限。 mode 参数是一个可选的整数，指定要执行的可访问性检查。 文件访问常量定义了 mode 可选的值。 可以创建由两个或更多个值的位或组成的掩码（例如 fs.constants.W_OK | fs.constants.R_OK）  
fs.appendFile(path, data[, options], callback) //异步地追加数据到一个文件，如果文件不存在则创建文件。 data 可以是一个字符串或 Buffer  
fs.copyFile(src, dest[, flags], callback) //异步的将 src 拷贝到 dest
fs.createReadStream(path[, options])
fs.createWriteStream(path[, options])
fs.mkdir(path[, mode], callback) //异步地创建目录。 完成回调只有一个可能的异常参数。 mode 默认为 0o777
fs.open(path, flags[, mode], callback) // 该回调有两个参数 (err, fd)
fs.read(fd, buffer, offset, length, position, callback) // 从 fd 指定的文件中读取数据。buffer 是数据将被写入到的 buffer。offset 是 buffer 中开始写入的偏移量。length 是一个整数，指定要读取的字节数。position 指定从文件中开始读取的位置。 如果 position 为 null，则数据从当前文件读取位置开始读取，且文件读取位置会被更新。 如果 position 为一个整数，则文件读取位置保持不变。
fs.readdir(path[, options], callback) // 读取一个目录的内容。 回调有两个参数 (err, files)，其中 files 是目录中不包括 '.' 和 '..' 的文件名的数组
fs.readFile(path[, options], callback)
fs.rmdir(path, callback)
fs.stat(path[, options], callback)
fs.write(fd, buffer[, offset[, length[, position]]], callback)
```

global - 全局变量			{#global}
====================================

```javascript
Buffer 类
__dirname
__filename
clearImmediate(immediateObject)
clearInterval(intervalObject)
clearTimeout(timeoutObject)
console
exports
global
module
process
require()
setImmediate(callback[, ...args])
setInterval(callback, delay[, ...args])
setTimeout(callback, delay[, ...args])
```

http			{#http}
====================================